<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="./src/node.js"></script>
<script src="./src/painter.js"></script>
<script src="https://rawgit.com/rwakulszowa/d3-mesh/v0.3.1/examples/d3-mesh.js"></script>
<style>
.bar {
    fill: grey
}
</style>
<div id="container"></div>
<script>

var size = { x: 480, y: 320 };

var container = d3.select("body")
    	  .append("svg")
	    .attr("width", size.x)
	    .attr("height", size.y);


function insertionSort(left, right) {

    function insert(dest, el) {
        var index = dest.findIndex(x => x > el);
        index = index == -1 ? dest.length : index;
        dest.splice(index, 0, el);
    }

    if (right.length == 0) {
        return { input: left, output: left, children: [] };
    } else {
        var newLeft = left.slice(),
            head = right[0],
            tail = right.slice(1);
        insert(newLeft, head);

        var child = insertionSort(newLeft, tail);
        return { input: left.concat(right), output: child.output, children: [child] };
    }

}

var m = d3.mesh();
m.x().domain([0, 480]);
m.y().domain([0, 320]);
m.data([[ insertionSort([], [1,5,2,4,8,6]) ]]);

var plot = container.selectAll("g")
    .data(m.flat())
  .enter().append("g");

Painter.paint(plot);

</script>
</head>

